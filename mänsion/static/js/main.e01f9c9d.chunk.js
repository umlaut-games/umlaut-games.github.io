(this.webpackJsonpmaension=this.webpackJsonpmaension||[]).push([[0],{33:function(e,t,i){e.exports=i(54)},38:function(e,t,i){},40:function(e,t,i){},41:function(e,t,i){},42:function(e,t,i){},43:function(e,t,i){},44:function(e,t,i){},53:function(e,t,i){},54:function(e,t,i){"use strict";i.r(t);var n=i(4),a=i.n(n),s=i(30),r=i.n(s);i(38),i(39),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i(40),i(41);function o(){return a.a.createElement("header",null,a.a.createElement("h1",null,"M\xe4nsion"),a.a.createElement("hr",null))}i(42);function h(){return a.a.createElement("footer",null,a.a.createElement("div",null,a.a.createElement("div",{className:"entry inline"},a.a.createElement("a",{href:"https://twitter.com/umlautgames",target:"_blank",rel:"noopener noreferrer"},"Twitter")," |"),a.a.createElement("div",{className:"entry inline"},"Kickstarter |"),a.a.createElement("div",{className:"entry inline"},"Patreon |"),a.a.createElement("div",{className:"entry inline"},a.a.createElement("a",{href:"https://umlaut-games.itch.io/",target:"_blank",rel:"noopener noreferrer"},"itch.io"))),a.a.createElement("div",{className:"copyright"},"\xa9 2020 ",a.a.createElement("a",{href:"https://umlaut.games",target:"_blank",rel:"noopener noreferrer"},"Umlaut Games"),a.a.createElement("span",null," \u2014 All Rights Reserved")))}i(43);function l(){return a.a.createElement("div",{className:"blocks"},a.a.createElement("div",{className:"block"},a.a.createElement("h2",null,"Kickstarter"),a.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed mattis sem nunc, vitae consectetur purus volutpat at. Integer at consequat arcu. Curabitur aliquam ex sit amet consectetur bibendum. Phasellus nec metus aliquam, vestibulum est et, efficitur metus. Fusce consectetur vel lectus non feugiat. Nam et ipsum leo. Mauris bibendum semper augue, non dapibus dui vestibulum id. In eget metus nec odio consectetur ultrices ut congue nisi. Vivamus et augue vel risus posuere pulvinar. Vestibulum placerat justo mi, sed aliquam massa lobortis vitae."),a.a.createElement("div",{className:"cta"},a.a.createElement("button",null,"Preorder Now!"))),a.a.createElement("div",{className:"block"},a.a.createElement("h2",null,"Patreon"),a.a.createElement("p",null,"Ut vestibulum bibendum enim ut sodales. Nam efficitur, sapien consectetur porttitor dapibus, dolor felis lacinia velit, ut commodo odio leo eu nunc. Curabitur vel libero aliquam, malesuada mauris vel, ornare elit. Sed consectetur mauris eu ante maximus pulvinar. Aliquam arcu metus, pellentesque non nibh id, scelerisque placerat mauris. Cras vel elit metus. Donec pulvinar purus ac ipsum tristique tincidunt. Quisque non placerat sapien. In ut iaculis libero, id dictum sem. Mauris pulvinar vel lorem nec cursus.")))}var c=i(32),u=(i(44),i(7)),d=i(10),_=i(5),p=i(16),v=!1,m=!1,f=!1,g=!1,y=!1,w=!1,b=i(9),k=i(8),x=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this))._outlineContainer=void 0,n._baseScale=1,n._resources=void 0,n._isFacingRight=!0,n._vx=0,n._vy=0,n._vr=0,n._resources=e,n}return Object(d.a)(i,[{key:"tick",value:function(e){0===this.vx&&0===this.vy&&0===this.vr||(this.x+=this.vx,this.y+=this.vy,this.rotation+=this.vr)}},{key:"collides",value:function(e){var t=e.getBounds(),i=this.getBounds(),n=t.x+t.width>i.x&&t.x<i.x+i.width&&t.y+t.height>i.y&&t.y<i.y+i.height;return n&&y&&(console.log("this",i),console.log("actor",t)),n}},{key:"adaptScale",value:function(e,t){var i=t-e,n=this._baseScale-i/1e3;this.scale.x=n,this.scale.y=n,this._adaptScaleBasedOnOrientation()}},{key:"_adaptScaleBasedOnOrientation",value:function(){var e=this.scale.x;!this._isFacingRight&&e>0&&(this.scale.x=-e),this._isFacingRight&&e<0&&(this.scale.x=Math.abs(e))}},{key:"outline",value:function(){this._outlineContainer&&(this.parent.removeChild(this._outlineContainer),delete this._outlineContainer),this._adaptScaleBasedOnOrientation(),this._outlineContainer=new _.b;var e=this.getBounds(),t=this.parent.toLocal(e);if(m){var i=new _.h("x: ".concat(e.x.toFixed(0)," y: ").concat(e.y.toFixed(0),"\nw: ").concat(e.width.toFixed(0)," h: ").concat(e.height.toFixed(0)),{fontSize:"10px",fill:"#fff"});i.x=t.x,i.y=t.y,this._outlineContainer.addChild(i)}var n=new _.c;n.lineStyle(1,0),n.drawRect(t.x,t.y,e.width,e.height),n.endFill(),this._outlineContainer.addChild(n),this.parent.addChild(this._outlineContainer)}},{key:"vx",get:function(){return this._vx}},{key:"vy",get:function(){return this._vy}},{key:"vr",get:function(){return this._vr}},{key:"realx",get:function(){return this.x-Math.abs(this.width)/2}}]),i}(_.b),O=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e))._clips={},n._currentClip=void 0,n._resources=e,n}return Object(d.a)(i,[{key:"_setIsFacingRight",value:function(e){this._isFacingRight=e,this._adaptScaleBasedOnOrientation()}},{key:"_playClip",value:function(e,t,i){var n=this;return this._currentClip&&(this.removeChild(this._currentClip),this._currentClip=void 0),new Promise((function(a,s){var r=n._clips[e];if(!r){var o="AnimationBase: failed to load clip: "+e;console.log(o,n._clips),s(o)}r.zIndex=1,n.addChild(r),n._currentClip=r,n._adaptScaleBasedOnOrientation(),n._currentClip.loop=t,n._currentClip.gotoAndPlay(0),n.children.sort((function(e,t){return e.zIndex-t.zIndex})),t||(r.onComplete=function(){r.stop(),i||n.removeChild(r),a()})}))}}]),i}(x),C=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n){var a;Object(u.a)(this,i);var s=(a=t.call(this,e))._resources["things.decals"],r=new _.g(s.textures[n]);return a.addChild(r),a}return i}(O),j=i(17),E=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"loadClip",value:function(e,t,i,n){var a=[];for(var s in e[t].textures){var r=e[t].textures[s];a.push(r)}var o=new _.a(a);return o.animationSpeed=i,o.scale.x=n,o.scale.y=n,o.anchor.x=.5,o}}]),e}(),S=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"init",value:function(t){return e._events=t,e.scanGamepads(),e._gamepads[0]||null}},{key:"connectHandler",value:function(t){console.log("gamepad connected"),e.addGamepad(t.gamepad)}},{key:"addGamepad",value:function(t){console.log("adding gamepad",t),e._gamepads[t.index]=t,e._state[t.index]={}}},{key:"disconnectHandler",value:function(t){console.log("gamepad disconnected"),e.removeGamepad(t.gamepad)}},{key:"removeGamepad",value:function(t){console.log("removing gamepad"),delete e._gamepads[t.index],delete e._state[t.index]}},{key:"updateStatus",value:function(){for(var t in e.scanGamepads(),e._gamepads)if(e._gamepads.hasOwnProperty(t)){var i=e._gamepads[t];if(i.axes,i.buttons)for(var n in i.buttons)if(i.buttons.hasOwnProperty(n)){var a=i.buttons[n];e._state[t][n]=e._state[t][n]||{},e._events[t][n]=e._events[t][n]||{};var s=e._state[t][n],r=e._events[t][n];a.pressed&&!s.isPressed&&(console.log("button pressed",t,n),s.isPressed=!0,r.pressEvent&&r.pressEvent()),!a.pressed&&s.isPressed&&(console.log("button released",t,n),s.isPressed=!1,r.releaseEvent&&r.releaseEvent())}}}},{key:"scanGamepads",value:function(){var t,i=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[],n=Object(p.a)(i);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a){var s=a.index;s in e._gamepads?e._gamepads[s]=a:(console.log("found new gamepad during scan, adding",s),e.addGamepad(a))}}}catch(r){n.e(r)}finally{n.f()}}}]),e}();S._gamepads={},S._state={},S._events={},window.addEventListener("gamepadconnected",S.connectHandler),window.addEventListener("gamepaddisconnected",S.disconnectHandler);var R=function(){function e(t,i){Object(u.a)(this,e),this._key=t,this._ignoreKeyup=i,this._isDown=!1,this._isUp=!0,this.pressEvent=null,this.releaseEvent=null,window.addEventListener("keydown",this._downHandler.bind(this),!1),window.addEventListener("keyup",this._upHandler.bind(this),!1)}return Object(d.a)(e,[{key:"_downHandler",value:function(e){e.key===this._key&&(e.preventDefault(),this._isUp&&this.pressEvent&&this.pressEvent(),this._isDown=!0,this._isUp=!1)}},{key:"_upHandler",value:function(e){e.key===this._key&&(e.preventDefault(),this._isDown&&this.releaseEvent&&this.releaseEvent(),this._isDown=!1,this._isUp=!0)}},{key:"isDown",get:function(){return this._isDown}}]),e}(),N=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getRandomInt",value:function(e,t){return Math.floor(Math.random()*(t-e))+e}},{key:"angleBetweenRad",value:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}},{key:"distanceTo",value:function(t,i){return Math.sqrt(e.distanceToSq(t,i))}},{key:"distanceToSq",value:function(e,t){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}}]),e}(),M={idle:Symbol.for("Idle"),walking:Symbol.for("Walking"),fire:Symbol.for("Fire"),died:Symbol.for("Died")},L=(Symbol.for("Head"),Symbol.for("Feet"),Symbol.for("Front"),Symbol.for("Back"),function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n){var a;Object(u.a)(this,i);var s="things.door";return(a=t.call(this,e))._clips=Object(j.a)({},s,E.loadClip(a._resources,s,.01,8)),a._clips[s].filters=[new _.l.BlurFilter(.2)],a._playClip(s,!1,!1).then((function(){n&&n()})),a}return i}(O)),F=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).addChild(new _.h("x",{fill:"#fff"})),n}return i}(x),I=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;Object(u.a)(this,i);var s="things.blood";return(n=t.call(this,e))._clips=Object(j.a)({},s,E.loadClip(n._resources,s,a,1)),n._playClip(s,!1,!1),n}return i}(O),H=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n,a){var s;Object(u.a)(this,i),(s=t.call(this,e))._isFacingRight=!0,s.height=a,s.width=n;var r=new _.g(w?_.i.WHITE:_.i.EMPTY);return r.width=n,r.height=a,w&&(r.tint=16711680),s.addChild(r),s}return i}(x);_.m.SCALE_MODE=_.f.NEAREST;var B=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n,a,s){var r;Object(u.a)(this,i),r=t.call(this,e);var o=new _.h(n,{fontSize:"8px",fill:"#fff",fontFamily:"Press Start 2P"}),h=new _.g(_.i.WHITE);return h.width=o.width,h.height=o.height,h.tint=0,r.addChild(h),r.addChild(o),setTimeout((function(){s()}),1e3*a),r}return i}(O),T=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n,a){var s;return Object(u.a)(this,i),(s=t.call(this,e))._text=void 0,s._lastFlip=0,s._skin=void 0,s._speed=1,s._health=100,s._power=12,s._state=M.idle,s._canGetHitAgain=!0,s._skin=n,s._speed=a,s}return Object(d.a)(i,[{key:"_setState",value:function(e){console.log(this.constructor.name,"New state:",e),this._state=e}},{key:"_idle",value:function(){this._state!==M.died&&(this._setState(M.idle),this._playClip(this._skin+".stance",!0))}},{key:"_died",value:function(){this._setState(M.died),this._vy=0,this._vx=0,this._vr=0,this._playClip(this._skin+".died",!1,!0)}},{key:"hitBy",value:function(e){var t=this,i=!1,n=!1;return this._canGetHitAgain&&(this._health-=e.power,n=!0,this._canGetHitAgain=!1,this._health<0?(this._health=0,i=!0,this._died()):(this._vx=e._isFacingRight?5:-5,this._playClip(this._skin+".gothit",!1).then((function(){t._vx=0,t._canGetHitAgain=!0,t._idle()})))),{died:i,objectTookDamage:n}}},{key:"flip",value:function(e){this._setIsFacingRight(void 0!==e?e:!this._isFacingRight)}},{key:"moveTowards",value:function(e){var t=0,i=0;if(N.distanceTo(this.position,e)>1){var n=N.angleBetweenRad(this.position,e);i=Math.sin(n)*this._speed,((t=Math.cos(n)*this._speed)>0&&!this._isFacingRight&&this._canFlipAgain()||t<0&&this._isFacingRight&&this._canFlipAgain())&&this.flip()}this._vy=i,this._vx=t}},{key:"_canFlipAgain",value:function(){var e=!0;return Date.now()-this._lastFlip>200&&(e=!0,this._lastFlip=Date.now()),e}},{key:"_logActorCoordinates",value:function(){g&&console.log("x",this.x,"real x",this.realx,"y",this.y,"width",this.width,"height",this.height)}},{key:"moved",value:function(){this._logActorCoordinates(),this._text&&(this._text.x=this.x-this._text.width/2,this._text.y=this.y-25)}},{key:"speak",value:function(e){var t=this;this._text||(this._text=new B(this._resources,e,3,(function(){t.parent.removeChild(t._text),delete t._text})),this._text.zIndex=80,this._text.x=this.x-this._text.width/2,this._text.y=this.y-25,this.parent.addChild(this._text))}},{key:"move",value:function(e,t){return!1}},{key:"power",get:function(){return this._power}},{key:"health",get:function(){return this._health}},{key:"state",get:function(){return this._state}}]),i}(O),G=i(18),z=i(14),D=i(20),A=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n,a,s,r){var o;Object(u.a)(this,i),(o=t.call(this,e)).pivot.x=o.width/2,o.pivot.y=o.height/2,o._vr=r,o._vx=a,o._vy=s;var h=new _.g(n);h.rotation=N.getRandomInt(0,100),o.scale.x=.05,o.scale.y=.05;var l={x:0,y:0};return new D.a.Tween(l).to({x:-N.getRandomInt(800,1200)},500).repeat(1).onUpdate((function(e){h.x=e.x})).start(0),new D.a.Tween(l).to({y:N.getRandomInt(1e3,1400)},300).easing(D.a.Easing.Bounce.Out).repeat(2).yoyo(!0).onUpdate((function(e){h.y=e.y})).start(0),o.addChild(h),o}return Object(d.a)(i,[{key:"tick",value:function(e){}}]),i}(O),P=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;Object(u.a)(this,i);var s="things.muzzle";return(n=t.call(this,e))._clips=Object(j.a)({},s,E.loadClip(n._resources,s,a,1)),n._playClip(s,!1,!1),n}return i}(O),W=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n,a){var s;return Object(u.a)(this,i),(s=t.call(this,e))._reloadTime=void 0,s._isReloading=!1,s._power=void 0,s._maxRounds=void 0,s._rounds=void 0,s._sprite=void 0,s._roundsSprite=void 0,s._shellSprites=[],s._power=n,s._rounds=a,s._maxRounds=a,s._reloadTime=5,s.zIndex=100,s.x=-5,s.y=20,s}return Object(d.a)(i,[{key:"rounds",get:function(){return this._rounds}},{key:"sprite",get:function(){return this._sprite}},{key:"roundsSprite",get:function(){return this._roundsSprite}},{key:"isReloading",get:function(){return this._isReloading}}]),Object(d.a)(i,[{key:"fire",value:function(){var e=this;if(this._rounds>0&&!this._isReloading){var t,i=new P(this._resources,2);i.x=60,i.y=-25,this.addChild(i),this._rounds--;var n=new A(this._resources,null===(t=this._roundsSprite)||void 0===t?void 0:t.texture,2,2,.1);n.position=this.parent.parent.toGlobal(this.parent.position);var a=this.parent.parent;return a.addChild(n),this._shellSprites.push(n),setTimeout((function(){a.removeChild(n),e._shellSprites=e._shellSprites.splice(e._shellSprites.findIndex((function(e){return e===n})))}),3e3),!0}return!1}},{key:"tick",value:function(e){var t,i=Object(p.a)(this._shellSprites);try{for(i.s();!(t=i.n()).done;){t.value.tick(e)}}catch(n){i.e(n)}finally{i.f()}}},{key:"reload",value:function(){var e=this;return this._isReloading=!0,setTimeout((function(){e._rounds=e._maxRounds,e._isReloading=!1}),1e3*this._reloadTime),console.log("reload"),!0}}]),i}(x),q=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e){var n;Object(u.a)(this,i),n=t.call(this,e,55,6);var a=e["weapons.shotgun"];return n._roundsSprite=new _.g(a.textures["shell.png"]),n._sprite=new _.g(a.textures["shotgun.png"]),n._sprite.scale.x=.1,n._sprite.scale.y=.1,n.addChild(n._sprite),n}return i}(W),U=i(25).default.Sound,V=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e){var n;Object(u.a)(this,i),(n=t.call(this,e,55,8)).fireSound=U.from("assets/sounds/beretta/beretta_fire.mp3");var a=e["weapons.beretta"];return n._sprite=new _.g(a.textures["beretta.png"]),n._sprite.scale.x=.1,n._sprite.scale.y=.1,n.addChild(n._sprite),n._roundsSprite=new _.g(a.textures["shell.png"]),n}return Object(d.a)(i,[{key:"fire",value:function(){var e=Object(G.a)(Object(z.a)(i.prototype),"fire",this).call(this);return e&&this.fireSound.play(),e}}]),i}(W),K={},J=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n){var a;return Object(u.a)(this,i),(a=t.call(this,e,n,3))._weapon=void 0,a._name="Taro",a._baseScale=1.1,a._health=77,a._clips[a._skin+".stance"]=E.loadClip(a._resources,a._skin+".stance",.1,1),a._clips[a._skin+".walk"]=E.loadClip(a._resources,a._skin+".walk",.2,1),a._clips[a._skin+".punch"]=E.loadClip(a._resources,a._skin+".punch",.3,1),a._clips[a._skin+".kick"]=E.loadClip(a._resources,a._skin+".kick",.2,1),a._clips[a._skin+".gothit"]=E.loadClip(a._resources,a._skin+".gothit",.2,1),a._clips[a._skin+".died"]=E.loadClip(a._resources,a._skin+".died",.2,1),K.shotgun=new q(e),K.beretta=new V(e),a._weapon=K.beretta,a.addChild(a._weapon),a._idle(),a}return Object(d.a)(i,[{key:"weapon",get:function(){return this._weapon}},{key:"playerName",get:function(){return this._name}}]),Object(d.a)(i,[{key:"reload",value:function(){this._weapon.reload()}},{key:"switchWeapon",value:function(){this.weapon.isReloading||(this.removeChild(this._weapon),this._weapon instanceof q?this._weapon=K.beretta:this._weapon=K.shotgun,this.addChild(this._weapon))}},{key:"updateCrosshairPosition",value:function(e){var t=this._isFacingRight?N.angleBetweenRad(this.weaponLocation,e):-N.angleBetweenRad(e,this.weaponLocation);this._weapon.rotation=t}},{key:"_canBeControlled",value:function(){return this._state===M.died?(console.log("Cant be controlled, player is dead"),!1):this._state===M.idle||this._state===M.walking}},{key:"_died",value:function(){Object(G.a)(Object(z.a)(i.prototype),"_died",this).call(this),this.y+=this.height/2,this.height=this.height/2}},{key:"fire",value:function(){var e=this;if(!this._canBeControlled())return!1;var t=this._weapon.fire();return t?(this.speak("P\xe4ng!"),this._setState(M.fire),this._vx=0,this._vy=0,this._playClip(this._skin+".punch",!1).then((function(){e._idle()})),!0):(this._idle(),!1)}},{key:"moveRight",value:function(){this._canBeControlled()&&(this._vx=this._speed,this._playClip(this._skin+".walk",!0),this._setState(M.walking))}},{key:"moveLeft",value:function(){this._canBeControlled()&&(this._vx=-this._speed,this._playClip(this._skin+".walk",!0),this._setState(M.walking),this._adaptScaleBasedOnOrientation())}},{key:"stopMoveHorizontally",value:function(){this._vx=0,0===this._vy&&this._canBeControlled()&&this._idle()}},{key:"moveUp",value:function(){this._canBeControlled()&&(this._vy=-this._speed,this._playClip(this._skin+".walk",!0),this._setState(M.walking))}},{key:"moveDown",value:function(){this._canBeControlled()&&(this._vy=this._speed,this._playClip(this._skin+".walk",!0),this._setState(M.walking))}},{key:"stopMoveVertically",value:function(){this._vy=0,0===this._vx&&this._canBeControlled()&&this._idle()}},{key:"speak",value:function(e){Object(G.a)(Object(z.a)(i.prototype),"speak",this).call(this,"".concat(this._name,": ").concat(e))}},{key:"move",value:function(e,t){var i=!1;return 0!==this.vy&&this.y+this.vy>0&&this.y+this.height+this.vy<e&&(this.y+=this.vy,i=!0),this.vx>0?this.realx+Math.abs(this.width)+7+this.vx<t&&(this.x+=this.vx,i=!0):this.vx<0&&this.realx+this.vx>=0&&(this.x+=this.vx,i=!0),i&&(this.adaptScale(this.y,e),this.moved()),i}},{key:"tick",value:function(e){this.weapon.tick(e)}},{key:"weaponLocation",get:function(){return this.toGlobal(this._weapon.position)}}]),i}(T),Q=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n){return Object(u.a)(this,i),t.call(this,e,n,1)}return i}(function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n){var a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return Object(u.a)(this,i),(a=t.call(this,e,n,s))._isFacingRight=!1,a._clips[a._skin+".walk"]=E.loadClip(a._resources,a._skin+".walk",.2,1),a._clips[a._skin+".gothit"]=a._clips[a._skin+".walk"],a._clips[a._skin+".died"]=a._clips[a._skin+".walk"],a._idle(),a}return Object(d.a)(i,[{key:"_idle",value:function(){this._setState(M.idle),this._playClip(this._skin+".walk",!0)}},{key:"_died",value:function(){var e=this;Object(G.a)(Object(z.a)(i.prototype),"_died",this).call(this),this.y+=this.height/2,this.pivot.set(Math.abs(this.width)/2,this.height),this.rotation=90*Math.PI/180,setTimeout((function(){e.parent.removeChild(e)}),1e4)}},{key:"move",value:function(e,t){var i=!1;return 0===this.vx&&0===this.vy&&0===this.vr||(this.x+=this.vx,this.y+=this.vy,this.rotation+=this.vr,i=!0,this.adaptScale(this.y,e)),i}}]),i}(T)),Y=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n){var a;Object(u.a)(this,i),(a=t.call(this,e,n))._baseScale=2.5;var s=new _.l.ColorMatrixFilter;return s.lsd(!1),a.filters=[s],a.scale.x=a._baseScale,a.scale.y=a._baseScale,a}return i}(Q),$=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n,a){var s;return Object(u.a)(this,i),(s=t.call(this,e))._width=n,s._explorationOffset=void 0,s._textures=void 0,s._backgroundContainer=void 0,s._actorContainer=void 0,s._foregroundContainer=void 0,s._explorationOffset=s._width/3,a&&(s._textures=e[a].textures),s._backgroundContainer=new _.b,s.addChild(s._backgroundContainer),s._actorContainer=new _.b,s.addChild(s._actorContainer),s._foregroundContainer=new _.b,s.addChild(s._foregroundContainer),s}return Object(d.a)(i,[{key:"_setup",value:function(){}},{key:"shallScroll",value:function(e,t){(t>0&&e+this._explorationOffset>this._width||t<0&&e-this._explorationOffset<this._explorationOffset)&&(this.x-=t,this.x>0&&(this.x=0),this.x<this._width-this.width&&(this.x=this._width-this.width))}},{key:"actorContainer",get:function(){return this._actorContainer}},{key:"backgroundContainer",get:function(){return this._backgroundContainer}}]),i}(O),X=i(25).default.Sound,Z=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n){var a;Object(u.a)(this,i),a=t.call(this,e,n,"maps.maension");var s=new _.g(a._textures["tumblr_inline_n258q4r8c01qhwjx8.png"]);s.scale.x=2.56,s.scale.y=2.56,a._backgroundContainer.addChild(s);var r=new _.g(a._textures["Maension_WIP.png"]);r.y=-40,r.scale.x=2,r.scale.y=2,a._backgroundContainer.addChild(r);var o=a._textures["tree.png"],h=new _.g(o);h.x=100,h.y=350,h.scale.x=.4,h.scale.y=.4,a._actorContainer.addChild(h);var l=a._textures["tree_dead.png"],c=new _.g(l);return c.x=50,c.y=180,c.scale.x=.4,c.scale.y=.4,a._backgroundContainer.addChild(c),a._setup(),a}return Object(d.a)(i,[{key:"_setup",value:function(){var e=X.from("assets/sounds/zombie1.mp3"),t=X.from("assets/sounds/zombie1.mp3");setInterval((function(){e.play()}),3e4),setInterval((function(){t.play()}),67e3)}}]),i}($),ee=i(25).default.Sound,te=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n){var a;return Object(u.a)(this,i),(a=t.call(this,e,n,"maps.house"))._setup(),a}return Object(d.a)(i,[{key:"_setup",value:function(){var e=new _.g(this._textures["house.png"]);e.scale.x=1.3,e.scale.y=1.3,this._backgroundContainer.addChild(e);var t=ee.from("assets/sounds/zombie1.mp3"),i=ee.from("assets/sounds/zombie1.mp3");setInterval((function(){t.play()}),3e4),setInterval((function(){i.play()}),67e3)}}]),i}($),ie=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n){var a;return Object(u.a)(this,i),(a=t.call(this,e,n,"maps.street"))._setup(),a}return Object(d.a)(i,[{key:"_setup",value:function(){var e=new _.g(this._textures["city01.png"]),t=e.width;e.scale.x=2,e.scale.y=2.1,e.y=-100;var i=new _.j(this._textures["concret.png"]);i.width=t,i.height=300,i.scale.x=2,i.scale.y=1.44,i.y=330,this._backgroundContainer.addChild(i),this._backgroundContainer.addChild(e);var n=new _.g(this._textures["police.png"]);n.scale.x=2,n.scale.y=2,n.y=this.height-2*n.height,n.x=300,this._foregroundContainer.addChild(n)}}]),i}($),ne=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n,a){var s;Object(u.a)(this,i),(s=t.call(this,e,n))._door=void 0;var r=new _.g(_.i.WHITE);return s._door=new L(e,a),s._door.x=n/2,s._door.y=30,r.width=n,r.height=800,r.tint=0,s._backgroundContainer.addChild(r),s._setup(),s}return Object(d.a)(i,[{key:"_setup",value:function(){this._foregroundContainer.addChild(this._door)}},{key:"animate",value:function(e){this._door.y+=e/100;var t=this._door.scale.x+e/2e4;this._door.scale.x=t,this._door.scale.y=t}}]),i}($),ae=i(19),se=function(e){Object(b.a)(i,e);var t=Object(k.a)(i);function i(e,n,a,s){var r;Object(u.a)(this,i),(r=t.call(this,e))._player=void 0,r._health=void 0,r._rounds=void 0,r._weapon=void 0,r._gameOverSign=void 0,r._width=void 0,r._height=void 0;var o=e["things.hud"];r._width=a,r._height=s,console.log("Setting up HUD","width:",r._width,"height:",r._height),r._player=n;var h=Object(ae.a)(Object(ae.a)({},i.bigText),{},{fontSize:"12px"}),l=new _.h(n.playerName,Object(ae.a)(Object(ae.a)({},h),{},{fill:"#ffff30"}));l.x=r._width/3-l.width/2,l.y=r._height-47,r.addChild(l),r._health=new _.h("",h),r._health.x=l.x,r._health.y=r._height-23,r.addChild(r._health),r._rounds=new _.b,r._rounds.x=r._width/3+77,r._rounds.y=r._height-33,r.addChild(r._rounds);var c=new _.g(o.textures["side.png"]);c.x=r._width/2-(c.width+c.width/2)+2,c.y=r._height-c.height-2,r.addChild(c);var d=new _.g(o.textures["center.png"]);d.x=r._width/2-d.width/2+1,d.y=r._height-d.height-2,r.addChild(d);var p=new _.g(o.textures["side.png"]);return p.x=r._width/2+(d.width+p.width/2)-2,p.y=r._height-p.height-2,p.scale.x=-1,r.addChild(p),r.update(),r}return Object(d.a)(i,[{key:"_renderWeapon",value:function(){this.removeChild(this._weapon),this._weapon=new _.g(this._player.weapon.sprite.texture),this._weapon.scale.x=2*this._player.weapon.sprite.scale.x,this._weapon.scale.y=2*this._player.weapon.sprite.scale.y,this._weapon.x=this._width/2+(this._weapon.width+27),this._weapon.y=this._height-40,this.addChild(this._weapon)}},{key:"_renderRounds",value:function(){this._rounds.removeChildren();for(var e=0;e<this._player.weapon.rounds;e++){var t,i=new _.g(null===(t=this._player.weapon.roundsSprite)||void 0===t?void 0:t.texture);i.scale.x=.1,i.scale.y=.1,i.x=10*e,i.y=10,this._rounds.addChild(i)}}},{key:"update",value:function(){this._health.text=this._player.health+" HP",this._renderRounds(),this._renderWeapon()}},{key:"renderGameOver",value:function(){this._gameOverSign=new _.h("Game Over\nPress Enter to retry!",Object(ae.a)(Object(ae.a)({},i.bigText),{},{fill:"#f00"})),this.addChild(this._gameOverSign),this._gameOverSign.x=this._width/2-this._gameOverSign.width/2,this._gameOverSign.y=this._height/2-this._gameOverSign.height/2}},{key:"animate",value:function(e){this._gameOverSign&&(this._gameOverSign.alpha+=e/1e3,this._gameOverSign.alpha>1&&(this._gameOverSign.alpha=.2))}}]),i}(O);se.bigText={fontFamily:"Arial Black",fontSize:"48px",fontWeight:"bold",fill:"#fff",dropShadow:!0,dropShadowColor:"#000",align:"center"};var re={},oe=function(){function e(t,i,n,a){Object(u.a)(this,e),this._stage=void 0,this._hud=void 0,this._map=void 0,this._player=void 0,this._beacon=void 0,this._enemies=[],this._mouseLocation=void 0,this._isRunning=!0,this._startOffset=void 0,this._elapsedSeconds=0,this._resources=void 0,this._width=void 0,this._height=void 0,this._mouseLine=void 0,this._crosshair=void 0,this._stage=i,this._resources=t,this._width=n,this._height=a,re.street=new ie(this._resources,this._width),re.house=new te(this._resources,this._width),re.maension=new Z(this._resources,this._width),re.loading=new ne(this._resources,this._width),this._init()}return Object(d.a)(e,[{key:"_init",value:function(){this._mouseLine=new _.c,this._crosshair=new F(this._resources),this._map=re.maension,this._stage.addChild(this._map),this._stage.cursor="none",this._player=new J(this._resources,"ryu"),this._player.x=60,this._player.y=400,this._player.adaptScale(this._player.y,this._height),this._crosshair.adaptScale(this._player.y,this._height),this._map.actorContainer.addChild(this._player),this._beacon=new H(this._resources,80,5);var e=new Q(this._resources,"bat"),t=new Y(this._resources,"bat");this._beacon.position.x=580,this._beacon.position.y=250,e.position.x=920,e.position.y=220,t.position.x=880,t.position.y=240,this._map.actorContainer.addChild(this._beacon),this._map.actorContainer.addChild(e),this._map.actorContainer.addChild(t),this._attachGamepad()||(console.log("no gamepad, attaching stinky keyboard"),this._attachKeyboard()),this._enemies=[],this._hud=new se(this._resources,this._player,this._width,this._height),this._stage.addChild(this._hud),this._updateHud(),this._attachMouse(),this._updateMouseLocation(new _.e(this._width/2,this._height/2)),this._startOffset=void 0,this._isRunning=!0,console.log("Game:","Game init done!")}},{key:"_attachMouse",value:function(){var e=this;this._stage.addChild(this._mouseLine),this._stage.addChild(this._crosshair),this._stage.interactive=!0,this._stage.on("mousemove",(function(t){e._updateMouseLocation(t.data.global)})),this._stage.on("mousedown",(function(){return e._fire()})),this._stage.on("mouseout",(function(){return e._isRunning=!1})),this._stage.on("mouseover",(function(){return e._isRunning=e._player.state!==M.died}))}},{key:"_updateCrosshair",value:function(){var e,t;this._mouseLocation&&this._isRunning&&(null===(e=this._player)||void 0===e?void 0:e.state)!==M.died&&(this._crosshair.x=this._mouseLocation.x-this._crosshair.width/2,this._crosshair.y=this._mouseLocation.y-this._crosshair.height/2,this._crosshair.x<this._player.toGlobal(this._stage).x?this._player.flip(!1):this._player.flip(!0),this._player.updateCrosshairPosition(this._stage.toGlobal(null===(t=this._crosshair)||void 0===t?void 0:t.position)),this._crosshair.adaptScale(this._player.y,this._height))}},{key:"_fire",value:function(){var e;if(this._isRunning&&(null===(e=this._player)||void 0===e?void 0:e.fire())){var t,i=new C(this._resources,"impact.png");i.scale.x=.1,i.scale.y=.1;var n=this._map.toLocal(this._crosshair);i.x=n.x+this._crosshair.width/2-i.width/2,i.y=n.y+this._crosshair.height/2-i.height/2,null===(t=this._map)||void 0===t||t.backgroundContainer.addChild(i),this._updateHud()}}},{key:"_moveRight",value:function(){this._isRunning&&this._player&&this._player.moveRight()}},{key:"_moveLeft",value:function(){this._isRunning&&this._player&&this._player.moveLeft()}},{key:"_moveUp",value:function(){this._isRunning&&this._player&&this._player.moveUp()}},{key:"_moveDown",value:function(){this._isRunning&&this._player&&this._player.moveDown()}},{key:"_stopMoveVertically",value:function(){var e;this._isRunning&&(null===(e=this._player)||void 0===e||e.stopMoveVertically())}},{key:"_stopMoveHorizontally",value:function(){var e;this._isRunning&&(null===(e=this._player)||void 0===e||e.stopMoveHorizontally())}},{key:"_attachKeyboard",value:function(){var e=this,t=new R("ArrowLeft",!0),i=new R("ArrowUp",!0),n=new R("ArrowRight",!0),a=new R("ArrowDown",!0),s=new R("k",!1),r=new R("w",!1),o=new R("r",!1),h=new R("Enter",!1);s.pressEvent=function(){return e._fire()},r.pressEvent=function(){return e._switchWeapon()},o.pressEvent=function(){return e._reload()},n.pressEvent=function(){return e._moveRight()},n.releaseEvent=function(){t.isDown||e._stopMoveHorizontally()},t.pressEvent=function(){return e._moveLeft()},t.releaseEvent=function(){n.isDown||e._stopMoveHorizontally()},i.pressEvent=function(){return e._moveUp()},i.releaseEvent=function(){a.isDown||e._stopMoveVertically()},a.pressEvent=function(){return e._moveDown()},a.releaseEvent=function(){i.isDown||e._stopMoveVertically()},h.pressEvent=function(){e._isRunning||e._init()}}},{key:"_attachGamepad",value:function(){var e=this;return!!S.init({0:{1:{pressEvent:function(){e._fire()}},15:{pressEvent:function(){return e._moveRight()},releaseEvent:function(){return e._stopMoveHorizontally()}},14:{pressEvent:function(){return e._moveLeft()},releaseEvent:function(){return e._stopMoveHorizontally()}},12:{pressEvent:function(){return e._moveUp()},releaseEvent:function(){return e._stopMoveVertically()}},13:{pressEvent:function(){return e._moveDown()},releaseEvent:function(){return e._stopMoveVertically()}},9:{pressEvent:function(){e._isRunning||e._init()}}}})}},{key:"_end",value:function(){this._isRunning=!1,this._hud.renderGameOver()}},{key:"_detectCollisions",value:function(){var e=this;this._player.collides(this._beacon)&&this._player.speak("It's locked!"),this._crosshair.collides(this._beacon)&&(this._beacon=new H(this._resources,this._height,this._width),this._stage.removeChild(this._map),this._map=new ne(this._resources,this._width,(function(){e._map=new Z(e._resources,e._width)})),this._stage.addChild(this._map));var t,i=Object(p.a)(this._enemies);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(M.died!==n.state&&M.died!==this._player.state&&this._player.collides(n)){var a=this._player.hitBy(n);a.objectTookDamage&&(this._drawBlood(this._player),this._updateHud()),a.died&&this._end()}}}catch(s){i.e(s)}finally{i.f()}}},{key:"_drawBlood",value:function(e){for(var t=0;t<5;t++){var i,n=new I(this._resources);n.x=e.x+N.getRandomInt(-20,20),n.y=e.y+e.height+N.getRandomInt(-20,20),n.rotation=N.getRandomInt(0,10),null===(i=this._map)||void 0===i||i.backgroundContainer.addChild(n)}}},{key:"_updateHud",value:function(){this._hud.update()}},{key:"_updateKI",value:function(){var e,t=Object(p.a)(this._enemies);try{for(t.s();!(e=t.n()).done;){var i=e.value;M.died!==i.state&&i.moveTowards(this._player.position)}}catch(n){t.e(n)}finally{t.f()}}},{key:"_moveActors",value:function(){var e,t=this._player;t.move(this._height,this._map.width)&&(null===(e=this._map)||void 0===e||e.shallScroll(t.realx,t.vx),this._updateCrosshair());var i,n=Object(p.a)(this._enemies);try{for(n.s();!(i=n.n()).done;){i.value.move(this._height,this._map.width)}}catch(a){n.e(a)}finally{n.f()}}},{key:"_outlineMouse",value:function(){if(this._mouseLine&&this._mouseLocation&&this._player&&this._map){this._mouseLine.clear(),this._mouseLine.lineStyle(1,16777215),this._mouseLine.position=this._player.weaponLocation;var e=this._mouseLine.toLocal(this._mouseLocation),t=e.x,i=e.y;this._mouseLine.lineTo(t,i),this._mouseLine.endFill()}}},{key:"_switchWeapon",value:function(){this._isRunning&&(this._player.switchWeapon(),this._updateHud())}},{key:"_reload",value:function(){this._isRunning&&(this._player.reload(),this._updateHud())}},{key:"_updateMouseLocation",value:function(e){this._isRunning&&(this._mouseLocation=e,this._updateCrosshair())}},{key:"tick",value:function(e,t){if(S.updateStatus(),this._hud.tick(t),this._isRunning){var i;this._player.tick(t),this._map.tick(t);var n=parseInt((e/1e3).toString());this._startOffset||(this._startOffset=n);var a=n-this._startOffset;a!==this._elapsedSeconds&&(this._elapsedSeconds=a,this._updateHud()),this._detectCollisions(),this._updateKI(),this._moveActors();if(null===(i=this._map)||void 0===i||i.actorContainer.children.sort((function(e,t){var i=e.getBounds(),n=t.getBounds();return e.y+i.height<t.y+n.height-5?-1:e.y+i.height>t.y+n.height-5?1:0})),v){this._player.outline(),this._beacon.outline(),this._crosshair.outline();var s,r=Object(p.a)(this._enemies);try{for(r.s();!(s=r.n()).done;){s.value.outline()}}catch(o){r.e(o)}finally{r.f()}this._outlineMouse()}}}}]),e}(),he=function(){function e(t){Object(u.a)(this,e),this._lastFrame=0,this._fpsCount=0,this._fpsTimer=0,this._game=void 0,this._renderer=void 0,this._stage=void 0,this._stageWrapper=void 0,this._fps=void 0,this._renderer=_.k({width:800,height:600,backgroundColor:1087931}),t.appendChild(this._renderer.view),console.log("Viewport",window.innerWidth,window.innerHeight),this._stage=new _.b,this._stageWrapper=new _.b,this._stageWrapper.addChild(this._stage),f&&(this._fps=new _.h("FPS: ",{fontWeight:"16px",fill:"#fff"}),this._fps.x=10,this._fps.y=10,this._stageWrapper.addChild(this._fps)),this._animate.bind(this),this._assetsLoaded.bind(this)}return Object(d.a)(e,[{key:"resize",value:function(){var e,t,i=window.innerWidth,n=window.innerHeight;n/i<.75?e=800*(t=n)/600:t=600*(e=i)/800,this._renderer.resize(e,t),this._stage.scale.set(e/800,t/600)}},{key:"run",value:function(){var e={crossOrigin:!0},t=new _.d;t.add("maps.house","assets/maps/house.json",e),t.add("maps.street","assets/maps/street.json",e),t.add("maps.maension","assets/maps/maension.json",e),t.add("ryu.stance","assets/ryu/stance.json",e),t.add("ryu.punch","assets/ryu/punch.json",e),t.add("ryu.kick","assets/ryu/kick.json",e),t.add("ryu.walk","assets/ryu/walk.json",e),t.add("ryu.gothit","assets/ryu/gothit.json",e),t.add("ryu.died","assets/ryu/died.json",e),t.add("bat.walk","assets/enemys/bat/walk.json",e),t.add("weapons.shotgun","assets/weapons/shotgun.json",e),t.add("weapons.beretta","assets/weapons/beretta.json",e),t.add("things.blood","assets/things/blood.json",e),t.add("things.door","assets/things/door.json",e),t.add("things.hud","assets/things/hud.json",e),t.add("things.decals","assets/things/decals.json",e),t.add("things.muzzle","assets/things/muzzle.json",e),t.onComplete.once(this._assetsLoaded.bind(this)),t.load()}},{key:"_assetsLoaded",value:function(e,t){this._game=new oe(t,this._stage,this._renderer.width,this._renderer.height),console.log("M\xe4nsion:","Init done, ready to scare!"),requestAnimationFrame(this._animate.bind(this))}},{key:"_animate",value:function(e){var t=e-this._lastFrame;this._lastFrame=e,this._fps&&(this._fpsCount++,this._fpsTimer+=t,this._fpsTimer>1e3&&(this._fps.text="FPS: "+this._fpsCount,this._fpsCount=0,this._fpsTimer=0)),this._game&&this._game.tick(e,t),this._renderer.render(this._stageWrapper),requestAnimationFrame(this._animate.bind(this)),D.a.update(e)}}]),e}();function le(){var e=Object(n.useRef)(null),t=Object(n.useState)(),i=Object(c.a)(t,2),s=i[0],r=i[1];return Object(n.useEffect)((function(){if(!s&&e.current){var t=new he(e.current);t.run(),r(t)}}),[e,s]),a.a.createElement("div",{className:"maension",ref:e})}i(53);function ce(){return a.a.createElement("div",{className:"blocks"},a.a.createElement("div",{className:"block"},a.a.createElement("h2",null,"How to Play"),a.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed mattis sem nunc, vitae consectetur purus volutpat at. Integer at consequat arcu. Curabitur aliquam ex sit amet consectetur bibendum. Phasellus nec metus aliquam, vestibulum est et, efficitur metus. Fusce consectetur vel lectus non feugiat. Nam et ipsum leo. Mauris bibendum semper augue, non dapibus dui vestibulum id. In eget metus nec odio consectetur ultrices ut congue nisi. Vivamus et augue vel risus posuere pulvinar. Vestibulum placerat justo mi, sed aliquam massa lobortis vitae.")),a.a.createElement("div",{className:"block",style:{minWidth:"500px",textAlign:"center"}},a.a.createElement("div",{className:"controls"},a.a.createElement("div",{className:"control"},a.a.createElement("div",{className:"space center"},a.a.createElement("div",{className:"button"},"W")),a.a.createElement("span",{className:"label"},": Move Up")),a.a.createElement("div",{className:"control"},a.a.createElement("div",{className:"space"},a.a.createElement("div",{className:"button"},"A"),a.a.createElement("div",{className:"button"},"D")),a.a.createElement("span",{className:"label"},": Move Left/Right")),a.a.createElement("div",{className:"control"},a.a.createElement("div",{className:"space center"},a.a.createElement("div",{className:"button"},"S")),a.a.createElement("span",{className:"label"},": Move Down")),a.a.createElement("div",{className:"control"},a.a.createElement("div",{className:"space center"},a.a.createElement("div",{className:"button"},a.a.createElement("i",{className:"fas fa-mouse-pointer"})),a.a.createElement("div",{className:"button"},a.a.createElement("i",{className:"fas fa-mouse"}))),a.a.createElement("span",{className:"label"},": Aim/Fire")),a.a.createElement("div",{className:"control"},a.a.createElement("div",{className:"space center"},a.a.createElement("div",{className:"button"},"R")),a.a.createElement("span",{className:"label"},": Reload")))))}function ue(){return a.a.createElement("div",null,a.a.createElement(o,null),a.a.createElement(le,null),a.a.createElement("hr",null),a.a.createElement("div",{className:"page"},a.a.createElement(ce,null),a.a.createElement(l,null)),a.a.createElement(h,null))}r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.e01f9c9d.chunk.js.map